{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\santi\\\\Desktop\\\\Programacion\\\\SchoolApp-FrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\santi\\\\Desktop\\\\Programacion\\\\SchoolApp-FrontEnd\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{ADD_USER_PENDING,ADD_USER_SUCCESS,ADD_USER_ERROR,FETCH_USERS,AUTHENTICATION,LOGIN_USER_PENDING,LOGIN_USER_SUCCESS,LOGIN_USER_ERROR,USER_LOGOUT}from\"../actions/types\";var initialState={authentication:false,users:[],error:null,isLoading:false,message:undefined,logged:false,token:\"\",failedLogin:false};export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case AUTHENTICATION:return _objectSpread({},state,{authentication:action.payload.authentication,token:action.payload.token});case USER_LOGOUT:return{state:initialState};case LOGIN_USER_PENDING:return _objectSpread({},state,{isLoading:true,failedLogin:false});//PREGUNTAR PARA QUE ESTA EL PENDING\n//CAEMOS ACA DESDE EL ACTION QUE\ncase LOGIN_USER_SUCCESS:return _objectSpread({},state,{isLoading:false,//PAYLOAD ES LA RES QUE VINO DEL BACK Y ESA RES VENIA CON UN TOKEN ENTONCES GUARDAMOS ESE TOKEN EN LA VARIABLE TOKEN\ntoken:action.payload.token,authentication:true});case LOGIN_USER_ERROR:return _objectSpread({},state,{isLoading:false,message:action.payload,failedLogin:true});case FETCH_USERS:return _objectSpread({},state,{users:action.payload});case ADD_USER_PENDING:return _objectSpread({},state,{isLoading:true});case ADD_USER_SUCCESS:{var newUser=action.payload.user;var user=[].concat(_toConsumableArray(state.users),[newUser]);return _objectSpread({},state,{isLoading:false,users:user});}case ADD_USER_ERROR:return _objectSpread({},state,{isLoading:false,error:action.error,message:action.payload.message});default:return state;}}","map":{"version":3,"sources":["C:/Users/santi/Desktop/Programacion/SchoolApp-FrontEnd/src/redux/reducers/login.js"],"names":["ADD_USER_PENDING","ADD_USER_SUCCESS","ADD_USER_ERROR","FETCH_USERS","AUTHENTICATION","LOGIN_USER_PENDING","LOGIN_USER_SUCCESS","LOGIN_USER_ERROR","USER_LOGOUT","initialState","authentication","users","error","isLoading","message","undefined","logged","token","failedLogin","state","action","type","payload","newUser","user"],"mappings":"ySAAA,OACEA,gBADF,CAEEC,gBAFF,CAGEC,cAHF,CAIEC,WAJF,CAKEC,cALF,CAMEC,kBANF,CAOEC,kBAPF,CAQEC,gBARF,CASEC,WATF,KAUO,kBAVP,CAYA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,cAAc,CAAE,KADG,CAEnBC,KAAK,CAAE,EAFY,CAGnBC,KAAK,CAAE,IAHY,CAInBC,SAAS,CAAE,KAJQ,CAKnBC,OAAO,CAAEC,SALU,CAMnBC,MAAM,CAAE,KANW,CAOnBC,KAAK,CAAE,EAPY,CAQnBC,WAAW,CAAE,KARM,CAArB,CAWA,cAAe,WAAwC,IAA9BC,CAAAA,KAA8B,2DAAtBV,YAAsB,IAARW,CAAAA,MAAQ,2CACrD,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKjB,CAAAA,cAAL,CACE,wBACKe,KADL,EAEET,cAAc,CAAEU,MAAM,CAACE,OAAP,CAAeZ,cAFjC,CAGEO,KAAK,CAAEG,MAAM,CAACE,OAAP,CAAeL,KAHxB,GAKF,IAAKT,CAAAA,WAAL,CACE,MAAO,CACLW,KAAK,CAAEV,YADF,CAAP,CAGF,IAAKJ,CAAAA,kBAAL,CACE,wBAGKc,KAHL,EAIEN,SAAS,CAAE,IAJb,CAKEK,WAAW,CAAE,KALf,GAOF;AAEA;AACA,IAAKZ,CAAAA,kBAAL,CACE,wBACKa,KADL,EAEEN,SAAS,CAAE,KAFb,CAGE;AACAI,KAAK,CAAEG,MAAM,CAACE,OAAP,CAAeL,KAJxB,CAKEP,cAAc,CAAE,IALlB,GAQF,IAAKH,CAAAA,gBAAL,CACE,wBACKY,KADL,EAEEN,SAAS,CAAE,KAFb,CAGEC,OAAO,CAAEM,MAAM,CAACE,OAHlB,CAIEJ,WAAW,CAAE,IAJf,GAOF,IAAKf,CAAAA,WAAL,CACE,wBACKgB,KADL,EAEER,KAAK,CAAES,MAAM,CAACE,OAFhB,GAIF,IAAKtB,CAAAA,gBAAL,CACE,wBACKmB,KADL,EAEEN,SAAS,CAAE,IAFb,GAKF,IAAKZ,CAAAA,gBAAL,CAAuB,CACrB,GAAMsB,CAAAA,OAAO,CAAGH,MAAM,CAACE,OAAP,CAAeE,IAA/B,CACA,GAAMA,CAAAA,IAAI,8BAAOL,KAAK,CAACR,KAAb,GAAoBY,OAApB,EAAV,CACA,wBACKJ,KADL,EAEEN,SAAS,CAAE,KAFb,CAGEF,KAAK,CAAEa,IAHT,GAKD,CACD,IAAKtB,CAAAA,cAAL,CACE,wBACKiB,KADL,EAEEN,SAAS,CAAE,KAFb,CAGED,KAAK,CAAEQ,MAAM,CAACR,KAHhB,CAIEE,OAAO,CAAEM,MAAM,CAACE,OAAP,CAAeR,OAJ1B,GAMF,QACE,MAAOK,CAAAA,KAAP,CAnEJ,CAqED","sourcesContent":["import {\r\n  ADD_USER_PENDING,\r\n  ADD_USER_SUCCESS,\r\n  ADD_USER_ERROR,\r\n  FETCH_USERS,\r\n  AUTHENTICATION,\r\n  LOGIN_USER_PENDING,\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_ERROR,\r\n  USER_LOGOUT,\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  authentication: false,\r\n  users: [],\r\n  error: null,\r\n  isLoading: false,\r\n  message: undefined,\r\n  logged: false,\r\n  token: \"\",\r\n  failedLogin: false,\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case AUTHENTICATION:\r\n      return {\r\n        ...state,\r\n        authentication: action.payload.authentication,\r\n        token: action.payload.token,\r\n      };\r\n    case USER_LOGOUT:\r\n      return {\r\n        state: initialState,\r\n      };\r\n    case LOGIN_USER_PENDING:\r\n      return {\r\n        //CAEMOS ACA DESDE EL ACTION EN DONDE NOS DIJIERON QUE SE ESTA LOGEANDO ALGUIEN\r\n        //EL REDUCER HACE UNA COPIA DEL STORE Y LE DICE QUE AGUANTE PORQUE VAN A HACER MAS COSAS --> ACTION\r\n        ...state,\r\n        isLoading: true,\r\n        failedLogin: false,\r\n      };\r\n    //PREGUNTAR PARA QUE ESTA EL PENDING\r\n\r\n    //CAEMOS ACA DESDE EL ACTION QUE\r\n    case LOGIN_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        //PAYLOAD ES LA RES QUE VINO DEL BACK Y ESA RES VENIA CON UN TOKEN ENTONCES GUARDAMOS ESE TOKEN EN LA VARIABLE TOKEN\r\n        token: action.payload.token,\r\n        authentication: true,\r\n      };\r\n\r\n    case LOGIN_USER_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        message: action.payload,\r\n        failedLogin: true,\r\n      };\r\n\r\n    case FETCH_USERS:\r\n      return {\r\n        ...state,\r\n        users: action.payload,\r\n      };\r\n    case ADD_USER_PENDING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n\r\n    case ADD_USER_SUCCESS: {\r\n      const newUser = action.payload.user;\r\n      const user = [...state.users, newUser];\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        users: user,\r\n      };\r\n    }\r\n    case ADD_USER_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: action.error,\r\n        message: action.payload.message,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}