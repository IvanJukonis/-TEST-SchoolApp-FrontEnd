{"ast":null,"code":"import{FETCH_STUDENT,ADD_STUDENT_PENDING,ADD_STUDENT_SUCCESS,ADD_STUDENT_ERROR,UPDATE_STUDENT_PENDING,UPDATE_STUDENT_SUCCESS,UPDATE_STUDENT_ERROR,DELETE_STUDENT_PENDING,DELETE_STUDENT_SUCCESS,DELETE_STUDENT_ERROR}from\"./types\";import store from\"../store/store\";//#region GET STUDENTS\nexport var fetchStudents=function fetchStudents(){return function(dispatch){fetch(\"https://stormy-brook-34938.herokuapp.com/api/students\").then(function(response){return response.json();}).then(function(data){console.log(data);return dispatch({type:FETCH_STUDENT,payload:data});});};};//#endregion\n//#region POST STUDENT\nexport var postStudent=function postStudent(student){return function(dispatch){dispatch({type:ADD_STUDENT_PENDING});//CombineTools allow us to get the users\nvar token=store.getState().users.token;var request={timeout:25000,method:\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:\"BEARER \".concat(token)},body:JSON.stringify(student)};return fetch(\"https://stormy-brook-34938.herokuapp.com/api/students\",request).then(function(response){return response.json();}).then(function(data){if(!Object.entries(data).length){return Promise.reject(data);}return dispatch({type:ADD_STUDENT_SUCCESS,payload:{student:data.createdStudent}});}).catch(function(error){return dispatch({type:ADD_STUDENT_ERROR,payload:error});});};};//#endregion\n//#region UPDATE STUDENTS\nexport var updateStudent=function updateStudent(student){console.log(student);return function(dispatch){dispatch({type:UPDATE_STUDENT_PENDING});var options={timeout:25000,method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({student:student})};return fetch(\"https://stormy-brook-34938.herokuapp.com/api/students/\".concat(student._id),options).then(function(response){return response.json();}).then(function(data){if(!Object.entries(data).length){return Promise.reject(data);}return dispatch({type:UPDATE_STUDENT_SUCCESS,payload:data});}).catch(function(error){return dispatch({type:UPDATE_STUDENT_ERROR,payload:error});});};};//#endregion\n//#region DELETE STUDENT\nexport var deleteStudent=function deleteStudent(code){return function(dispatch){dispatch({type:DELETE_STUDENT_PENDING});var options={timeout:25000,method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}};return fetch(\"https://stormy-brook-34938.herokuapp.com/api/students/\".concat(code),options).then(function(response){return response.json();}).then(function(data){if(!Object.entries(data).length){return Promise.reject(data);}return dispatch({type:DELETE_STUDENT_SUCCESS,payload:data});}).catch(function(error){return dispatch({type:DELETE_STUDENT_ERROR,payload:error});});};};//#endregion","map":{"version":3,"sources":["C:/Users/santi/Desktop/SchoolApp-FrontEnd/src/redux/actions/student.js"],"names":["FETCH_STUDENT","ADD_STUDENT_PENDING","ADD_STUDENT_SUCCESS","ADD_STUDENT_ERROR","UPDATE_STUDENT_PENDING","UPDATE_STUDENT_SUCCESS","UPDATE_STUDENT_ERROR","DELETE_STUDENT_PENDING","DELETE_STUDENT_SUCCESS","DELETE_STUDENT_ERROR","store","fetchStudents","dispatch","fetch","then","response","json","data","console","log","type","payload","postStudent","student","token","getState","users","request","timeout","method","headers","authorization","body","JSON","stringify","Object","entries","length","Promise","reject","createdStudent","catch","error","updateStudent","options","_id","deleteStudent","code"],"mappings":"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","sourcesContent":["import {\r\n  FETCH_STUDENT,\r\n  ADD_STUDENT_PENDING,\r\n  ADD_STUDENT_SUCCESS,\r\n  ADD_STUDENT_ERROR,\r\n  UPDATE_STUDENT_PENDING,\r\n  UPDATE_STUDENT_SUCCESS,\r\n  UPDATE_STUDENT_ERROR,\r\n  DELETE_STUDENT_PENDING,\r\n  DELETE_STUDENT_SUCCESS,\r\n  DELETE_STUDENT_ERROR,\r\n} from \"./types\";\r\n\r\nimport store from \"../store/store\";\r\n\r\n//#region GET STUDENTS\r\nexport const fetchStudents = () => (dispatch) => {\r\n  fetch(\"https://stormy-brook-34938.herokuapp.com/api/students\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n      return dispatch({\r\n        type: FETCH_STUDENT,\r\n        payload: data,\r\n      });\r\n    });\r\n};\r\n//#endregion\r\n//#region POST STUDENT\r\nexport const postStudent = (student) => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: ADD_STUDENT_PENDING,\r\n    });\r\n    //CombineTools allow us to get the users\r\n    const { token } = store.getState().users;\r\n    const request = {\r\n      timeout: 25000,\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: `BEARER ${token}`,\r\n      },\r\n      body: JSON.stringify(student),\r\n    };\r\n    return fetch(`https://stormy-brook-34938.herokuapp.com/api/students`, request)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (!Object.entries(data).length) {\r\n          return Promise.reject(data);\r\n        }\r\n        return dispatch({\r\n          type: ADD_STUDENT_SUCCESS,\r\n          payload: {\r\n            student: data.createdStudent,\r\n          },\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        return dispatch({\r\n          type: ADD_STUDENT_ERROR,\r\n          payload: error,\r\n        });\r\n      });\r\n  };\r\n};\r\n//#endregion\r\n//#region UPDATE STUDENTS\r\nexport const updateStudent = (student) => {\r\n  console.log(student);\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: UPDATE_STUDENT_PENDING,\r\n    });\r\n    const options = {\r\n      timeout: 25000,\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ student }),\r\n    };\r\n    return fetch(`https://stormy-brook-34938.herokuapp.com/api/students/${student._id}`, options)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (!Object.entries(data).length) {\r\n          return Promise.reject(data);\r\n        }\r\n        return dispatch({\r\n          type: UPDATE_STUDENT_SUCCESS,\r\n          payload: data,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        return dispatch({\r\n          type: UPDATE_STUDENT_ERROR,\r\n          payload: error,\r\n        });\r\n      });\r\n  };\r\n};\r\n//#endregion\r\n//#region DELETE STUDENT\r\nexport const deleteStudent = (code) => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: DELETE_STUDENT_PENDING,\r\n    });\r\n    const options = {\r\n      timeout: 25000,\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    return fetch(`https://stormy-brook-34938.herokuapp.com/api/students/${code}`, options)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (!Object.entries(data).length) {\r\n          return Promise.reject(data);\r\n        }\r\n        return dispatch({\r\n          type: DELETE_STUDENT_SUCCESS,\r\n          payload: data,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        return dispatch({\r\n          type: DELETE_STUDENT_ERROR,\r\n          payload: error,\r\n        });\r\n      });\r\n  };\r\n};\r\n//#endregion\r\n"]},"metadata":{},"sourceType":"module"}